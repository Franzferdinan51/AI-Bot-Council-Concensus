<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI Council MCP Debugger</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap"
    rel="stylesheet">
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            sans: ['Inter', 'sans-serif'],
            mono: ['JetBrains Mono', 'monospace'],
          },
          colors: {
            gray: {
              850: '#1f2937',
              900: '#111827',
              950: '#030712',
            }
          }
        }
      }
    }
  </script>
  <style>
    /* Glassmorphism */
    .glass {
      background: rgba(17, 24, 39, 0.7);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.05);
    }

    .glass-panel {
      background: rgba(31, 41, 55, 0.4);
      border: 1px solid rgba(255, 255, 255, 0.05);
    }

    /* Scrollbar */
    ::-webkit-scrollbar {
      width: 6px;
      height: 6px;
    }

    ::-webkit-scrollbar-track {
      background: #111827;
    }

    ::-webkit-scrollbar-thumb {
      background: #374151;
      border-radius: 3px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: #4b5563;
    }

    /* JSON Syntax Highlighting */
    .json-key {
      color: #9cdcfe;
    }

    .json-string {
      color: #ce9178;
    }

    .json-number {
      color: #b5cea8;
    }

    .json-boolean {
      color: #569cd6;
    }

    .json-null {
      color: #569cd6;
    }

    .animate-fade-in {
      animation: fadeIn 0.3s ease-in-out;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(5px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
  </style>
</head>

<body class="bg-gray-950 text-gray-200 font-sans h-screen flex overflow-hidden selection:bg-indigo-500/30">

  <!-- Sidebar -->
  <aside class="w-64 bg-gray-900 border-r border-gray-800 flex flex-col z-20">
    <div class="p-5 border-b border-gray-800 flex items-center gap-3">
      <div
        class="w-8 h-8 rounded-lg bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center shadow-lg shadow-indigo-500/20">
        <span class="text-white font-bold text-lg">AI</span>
      </div>
      <div>
        <h1 class="font-bold text-sm tracking-wide text-white">Council MCP</h1>
        <div class="flex items-center gap-1.5 mt-0.5">
          <div class="w-2 h-2 rounded-full bg-green-500 animate-pulse" id="status-dot"></div>
          <span class="text-[10px] text-gray-400 uppercase tracking-wider font-medium" id="status-text">Online</span>
        </div>
      </div>
    </div>

    <nav class="flex-1 p-3 space-y-1 overflow-y-auto">
      <button onclick="switchTab('dashboard')"
        class="nav-item w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium text-gray-400 hover:text-white hover:bg-gray-800 transition-all group active"
        data-tab="dashboard">
        <span class="opacity-70 group-hover:opacity-100">üìä</span> Dashboard
      </button>
      <button onclick="switchTab('tools')"
        class="nav-item w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium text-gray-400 hover:text-white hover:bg-gray-800 transition-all group"
        data-tab="tools">
        <span class="opacity-70 group-hover:opacity-100">üõ†Ô∏è</span> Tool Tester
      </button>
      <button onclick="switchTab('logs')"
        class="nav-item w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium text-gray-400 hover:text-white hover:bg-gray-800 transition-all group"
        data-tab="logs">
        <span class="opacity-70 group-hover:opacity-100">üìù</span> Server Logs
      </button>
      <button onclick="switchTab('sessions')"
        class="nav-item w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium text-gray-400 hover:text-white hover:bg-gray-800 transition-all group"
        data-tab="sessions">
        <span class="opacity-70 group-hover:opacity-100">üë•</span> Sessions
      </button>
      <button onclick="switchTab('config')"
        class="nav-item w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium text-gray-400 hover:text-white hover:bg-gray-800 transition-all group"
        data-tab="config">
        <span class="opacity-70 group-hover:opacity-100">‚öôÔ∏è</span> Configuration
      </button>
    </nav>

    <div class="p-4 border-t border-gray-800">
      <a href="/council.html" target="_blank"
        class="block w-full bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 text-white text-center py-2 rounded-lg text-sm font-medium shadow-lg shadow-indigo-900/20 transition-all transform hover:scale-[1.02]">
        Open Council UI ‚Üó
      </a>
    </div>
  </aside>

  <!-- Main Content -->
  <main class="flex-1 flex flex-col relative overflow-hidden bg-[url('/assets/grid.svg')] bg-repeat opacity-90">

    <!-- Top Bar -->
    <header class="h-16 border-b border-gray-800 glass flex items-center justify-between px-6 z-10">
      <h2 class="text-lg font-semibold text-white" id="page-title">Dashboard</h2>
      <div class="flex items-center gap-4">
        <div class="text-xs text-gray-400 font-mono bg-gray-900 px-2 py-1 rounded border border-gray-800">
          v2.4.0
        </div>
        <a href="/api/health" target="_blank" class="text-xs text-gray-400 hover:text-white transition-colors">API
          Health</a>
      </div>
    </header>

    <!-- Content Area -->
    <div class="flex-1 overflow-y-auto p-6 scroll-smooth" id="content-area">

      <!-- DASHBOARD VIEW -->
      <div id="view-dashboard" class="space-y-6 animate-fade-in">
        <!-- Stats Grid -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
          <div class="glass-panel p-4 rounded-xl">
            <div class="text-gray-400 text-xs font-medium uppercase tracking-wider mb-1">Uptime</div>
            <div class="text-2xl font-bold text-white font-mono" id="stat-uptime">00:00:00</div>
          </div>
          <div class="glass-panel p-4 rounded-xl">
            <div class="text-gray-400 text-xs font-medium uppercase tracking-wider mb-1">Memory Usage</div>
            <div class="text-2xl font-bold text-white font-mono" id="stat-memory">0 MB</div>
          </div>
          <div class="glass-panel p-4 rounded-xl">
            <div class="text-gray-400 text-xs font-medium uppercase tracking-wider mb-1">Active Sessions</div>
            <div class="text-2xl font-bold text-indigo-400 font-mono" id="stat-sessions">0</div>
          </div>
          <div class="glass-panel p-4 rounded-xl">
            <div class="text-gray-400 text-xs font-medium uppercase tracking-wider mb-1">Total Requests</div>
            <div class="text-2xl font-bold text-green-400 font-mono" id="stat-requests">0</div>
          </div>
        </div>

        <!-- Recent Activity -->
        <div class="glass-panel rounded-xl overflow-hidden flex flex-col h-96">
          <div class="p-4 border-b border-gray-800 bg-gray-900/50 flex justify-between items-center">
            <h3 class="font-semibold text-white">Recent Activity</h3>
            <span class="text-xs text-gray-500">Live Stream</span>
          </div>
          <div class="flex-1 overflow-y-auto p-0 font-mono text-xs" id="activity-log">
            <!-- Logs injected here -->
          </div>
        </div>
      </div>

      <!-- TOOLS VIEW -->
      <div id="view-tools" class="hidden h-full flex flex-col md:flex-row gap-6 animate-fade-in">
        <!-- Left: Input -->
        <div class="w-full md:w-1/2 flex flex-col gap-4 h-full">
          <div class="glass-panel p-4 rounded-xl flex-shrink-0">
            <label class="block text-xs font-bold text-gray-400 uppercase mb-2">Select Tool</label>
            <select id="tool-select"
              class="w-full bg-gray-900 border border-gray-700 rounded-lg p-2.5 text-sm text-white focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 outline-none transition-all">

              <!-- LOGS VIEW -->
              <div id="view-logs" class="hidden h-full flex flex-col animate-fade-in">
                <div class="glass-panel rounded-xl flex-1 flex flex-col overflow-hidden">
                  <div class="p-3 border-b border-gray-800 bg-gray-900/50 flex justify-between items-center">
                    <div class="flex gap-2">
                      <button onclick="filterLogs('ALL')"
                        class="px-3 py-1 rounded text-xs font-medium bg-gray-800 text-white hover:bg-gray-700 transition-colors active-filter"
                        data-filter="ALL">All</button>
                      <button onclick="filterLogs('ERROR')"
                        class="px-3 py-1 rounded text-xs font-medium bg-gray-900 text-gray-400 hover:text-red-400 hover:bg-gray-800 transition-colors"
                        data-filter="ERROR">Errors</button>
                      <button onclick="filterLogs('WARN')"
                        class="px-3 py-1 rounded text-xs font-medium bg-gray-900 text-gray-400 hover:text-amber-400 hover:bg-gray-800 transition-colors"
                        data-filter="WARN">Warnings</button>
                      <button onclick="filterLogs('TOOL')"
                        class="px-3 py-1 rounded text-xs font-medium bg-gray-900 text-gray-400 hover:text-blue-400 hover:bg-gray-800 transition-colors"
                        data-filter="TOOL">Tools</button>
                    </div>
                    <button onclick="clearLogs()" class="text-xs text-gray-500 hover:text-white">Clear Logs</button>
                  </div>
                  <div id="full-log-view" class="flex-1 overflow-auto p-4 font-mono text-xs space-y-1 bg-gray-950">
                    <!-- Logs injected here -->
                  </div>
                </div>
              </div>

              <!-- SESSIONS VIEW -->
              <div id="view-sessions" class="hidden animate-fade-in space-y-6">
                <div class="flex justify-between items-center">
                  <h3 class="text-lg font-semibold text-white">Active Sessions</h3>
                  <button onclick="refreshSessions()" class="text-sm text-indigo-400 hover:text-indigo-300">Refresh
                    List</button>
                </div>
                <div id="sessions-list" class="grid grid-cols-1 gap-4">
                  <!-- Session cards injected here -->
                  <div class="text-center text-gray-500 py-10">Loading sessions...</div>
                </div>
              </div>

              <!-- CONFIG VIEW -->
              <div id="view-config" class="hidden animate-fade-in max-w-4xl mx-auto">
                <div class="glass-panel rounded-xl overflow-hidden">
                  <div class="p-6 border-b border-gray-800">
                    <h3 class="text-lg font-semibold text-white">Server Configuration</h3>
                    <p class="text-sm text-gray-400 mt-1">Update environment variables and provider settings.</p>
                  </div>
                  <div class="p-6 space-y-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                      <div class="space-y-2">
                        <label class="text-xs font-bold text-gray-400 uppercase">Gemini API Key</label>
                        <input type="password" id="cfg-gemini"
                          class="w-full bg-gray-900 border border-gray-700 rounded-lg p-2.5 text-sm text-white focus:border-indigo-500 outline-none"
                          placeholder="sk-...">
                      </div>
                      <div class="space-y-2">
                        <label class="text-xs font-bold text-gray-400 uppercase">OpenRouter Key</label>
                        <input type="password" id="cfg-openrouter"
                          class="w-full bg-gray-900 border border-gray-700 rounded-lg p-2.5 text-sm text-white focus:border-indigo-500 outline-none"
                          placeholder="sk-or-...">
                      </div>
                      <div class="space-y-2">
                        <label class="text-xs font-bold text-gray-400 uppercase">Search Provider</label>
                        <select id="cfg-search"
                          class="w-full bg-gray-900 border border-gray-700 rounded-lg p-2.5 text-sm text-white focus:border-indigo-500 outline-none">
                          <option value="duckduckgo">DuckDuckGo (Free)</option>
                          <option value="brave">Brave Search</option>
                          <option value="tavily">Tavily</option>
                          <option value="serper">Serper (Google)</option>
                        </select>
                      </div>
                      <div class="space-y-2">
                        <label class="text-xs font-bold text-gray-400 uppercase">Search API Key</label>
                        <input type="password" id="cfg-search-key"
                          class="w-full bg-gray-900 border border-gray-700 rounded-lg p-2.5 text-sm text-white focus:border-indigo-500 outline-none"
                          placeholder="Key for selected provider...">
                      </div>
                    </div>

                    <div class="pt-4 border-t border-gray-800 flex justify-end">
                      <button onclick="saveConfig()"
                        class="bg-green-600 hover:bg-green-500 text-white px-6 py-2.5 rounded-lg font-bold shadow-lg transition-all transform active:scale-[0.98]">
                        Save Changes
                      </button>
                    </div>
                  </div>
                </div>

                <!-- Bot Configuration -->
                <div class="glass-panel rounded-xl overflow-hidden mt-6">
                  <div class="p-6 border-b border-gray-800">
                    <h3 class="text-lg font-semibold text-white">Bot Personas</h3>
                    <p class="text-sm text-gray-400 mt-1">Customize the personality and models for each council member.
                    </p>
                  </div>
                  <div class="p-6 grid grid-cols-1 md:grid-cols-2 gap-4" id="bot-config-container">
                    <!-- Bots injected here -->
                    <div class="text-center text-gray-500 col-span-2">Loading bots...</div>
                  </div>
                </div>
              </div>

          </div>
  </main>

  <script src="debug.js"></script>
</body>

</html>